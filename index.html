<!doctype html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="bootstrap/css/bootstrap.css">
<link rel="stylesheet" href="awesome/css/font-awesome.css">
<link rel="stylesheet" href="style/main.css">
<script src="jq/$.js"></script>
<script src="jq/jquery.color.min.js"></script>
<script src="jq/jquery.hotkeys.js"></script>
<script src="jq/scrollspy.js"></script>
<script src="jq/jquery.scrollTo.min.js"></script>
<script src="bootstrap/js/bootstrap.js"></script>
<script src="node_modules/underscore/underscore.js"></script>
<script src="node_modules/underscore.string/dist/underscore.string.min.js"></script>
<script>
_.mixin(_.str.exports());
</script>
<script src="script/title.js"></script>
<script src="script/setup.js"></script>
<script src="script/queue.js"></script>
<script src="script/arealist.js"></script>
<script src="script/msglist.js"></script>
<script src="script/1message.js"></script>
<script src="script/url-area.js"></script>
<script src="script/urlbar.js"></script>
<script>
phiQ = queue();
JAM = require('fidonet-jam');
FidoHTML = require('fidohtml')({
   dataMode: true
});
phiURL = require('fghi-url');
phiBar = urlbar();
GUI = require('nw.gui');
nwClipboard = GUI.Clipboard.get();

beforeSpace = function(inString){
   if( inString.indexOf(' ') === -1 ){
      return inString;
   }
   return _(inString).strLeft(' ');
};
</script>
<title>PhiDo</title>
<script>
$(function(){
initSetup();
$('#content').css('text-align', 'left').on('click', 'a[data-href]', function(){
   var supportedSchemes = ['area'];
   var safeSchemes = [
      'http',
      'https',
      'ftp',
      'mailto',
      'ed2k',
      'facetime',
      'feed',
      'geo',
      'irc',
      'ircs',
      'magnet',
      'news',
      'nntp',
      'sip',
      'sips',
      'skype',
      'sms',
      'ssh',
      'tel',
      'telnet',
      'tftp',
      'xmpp'
   ];

   var $this = $(this);
   var URL = $this.data('href');

   var separatorPosition = URL.indexOf(':');
   if( separatorPosition < 0 ) return false;

   var schemeLC = URL.slice(0, separatorPosition).toLowerCase();
   if( supportedSchemes.indexOf(schemeLC) >= 0 ){
      phiBar.open(URL);
   } else if( safeSchemes.indexOf(schemeLC) >= 0 ){
      GUI.Shell.openExternal(URL);
   }

   return false;
}).on('click', '.hasMsgURL', function(){
   phiBar.open( $(this).data('msgURL') );
}).on('contextmenu', '.hasMsgURL', function(e){
   var $this = $(this);
   var URL = $this.data('msgURL');

   var contextMenu = new GUI.Menu();
   contextMenu.append(new GUI.MenuItem({
      'label': 'Copy FGHI URL',
      'click': function(){
         nwClipboard.set( URL );
      }
   }));
   $this.data('contextMenu', contextMenu);
   $this.data('contextMenu').popup(
      e.originalEvent.x,
      e.originalEvent.y
   );
   return false;
});
phiBar.attach( $('#urlbar') );
phiBar.open('area://');
});
</script>
</head>
<body>
<div class="container">
<div class="row"><div class="col-xs-12">
<div id="urlbar" style="display: flex; flex-direction: row; margin-bottom: 1em;">
<button type="button" class="form-control btn btn-default" style="width: 50px; flex-grow: 0;"
id="back" disabled><i class="fa fa-arrow-left"></i></button>
<button type="button" class="form-control btn btn-default" style="width: 50px; flex-grow: 0;"
id="forward" disabled><i class="fa fa-arrow-right"></i></button>
<input type="text" class="form-control" style="flex-grow: 1;"
id="URL" placeholder="Enter FGHI URL here" value="area://">
<button type="submit" class="form-control btn btn-default" style="width: 50px; flex-grow: 0;"
id="goToURL"><i class="fa fa-play"></i></button>
<button type="button" class="form-control btn btn-default" style="width: 50px; flex-grow: 0;"><img
src="icon/PhiDo-16x16.png"
></button>
</div>
</div></div>
<div id="content" style="text-align: center;"><img src="img/loading.gif"><br>
loading configurationâ€¦</div>
</div></body>
</html>